"use strict";function graphcomment(e){var t="undefined"!=typeof window&&window,o=t&&t.document,n=(e=e||{},new function(e,t){var o=new G;this.extractTitle=function(){return void 0!==t&&t.title},this.ieCompatibility=function(){e.location.origin||(e.location.origin=e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:""))},this.extractUrl=function(){return this.ieCompatibility(),J(e.location.origin+e.location.pathname,{p:r.p,page:r.page})},this.extractIdentifier=function(e){return o.init(e).sanitize()}}(t,o)),a=t.graphcomment_amp;if(t)var r=new function(){var e=t.location.search.substring(1);if(!e)return{};for(var o=e.split("&"),n=0;n<o.length;n++){var a=o[n].split("=");void 0===this[a[0]]?this[a[0]]=a[1]:"string"==typeof this[a[0]]?this[a[0]]=[this[a[0]],a[1]]:this[a[0]].push(a[1])}};var i=String(Math.round(1e7*Math.random()));if(a){var c=".i-amphtml-loader { display: none; }",l=document.createElement("style");l.type="text/css",l.setAttribute("amp-custom",!0),l.styleSheet?l.styleSheet.cssText=c:l.appendChild(document.createTextNode(c)),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(l)}function s(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}var d=t.requestAnimationFrame||function(e){return setTimeout(function(){e()},1e3/60)},m=e.url||n.extractUrl(),u={url:m,target:e.target,title:e.page_title||n.extractTitle(),comment_id:e.comment_id,website_id:e.graphcomment_id||t.graphcomment_id,fixed_header_height:e.fixed_header_height,count_per_page:e.count_per_page,uid:e.uid,guid:e.guid||e.canonical_url,identifier:e.identifier||n.extractIdentifier(m),category:e.category,readonly:e.readonly,widget:e.widget||!1,disable_live_replies:e.disable_live_replies||!1,disable_ads:e.disable_ads||!1,inapp:t.graphcomment_inapp||e.inapp||function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return!!e&&(e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1)}()||!1,publication_date:e.publication_date,lifetime:e.lifetime,theme:"undefined"!=typeof document?e.theme||function(e){var t;if("transparent"===e)t={red:0,green:0,blue:0};else if("#"===e.charAt(0))4===e.length&&(e+=e.substr(1)),t={red:parseInt(e.substr(1,2),16),green:parseInt(e.substr(3,2),16),blue:parseInt(e.substr(5,2),16)};else if("rgba("===e.slice(0,5)||"rgb("===e.slice(0,4)){var o=e.match(/\d+/g).map(Number);t={red:o[0],green:o[1],blue:o[1]}}return(299*t.red+587*t.green+114*t.blue)/1e3>=192?"dark":"light"}(getComputedStyle(document.body).color):"light",api_public_key:e.sso_public_key||e.api_public_key,facebook_redirect_after_login:e.facebook_redirect_after_login,twitter_redirect_after_login:e.twitter_redirect_after_login,google_redirect_after_login:e.google_redirect_after_login,overlay:!!e.overlay,overlay_visible:e.overlay?void 0!==e.overlay.visible&&e.overlay.visible:null,overlay_zindex:e.overlay?e.overlay.zindex||99:null,overlay_width:e.overlay?Math.max(400,e.overlay.width||600):null,overlay_background:e.overlay?void 0===e.overlay.background||e.overlay.background:null,overlay_page_width:e.overlay?e.overlay.page_width||1200:null,overlay_alternate:e.overlay?void 0!==e.overlay.alternate&&e.overlay.alternate:null,overlay_button:e.overlay?void 0===e.overlay.button||!!e.overlay.button:null,overlay_button_label:e.overlay&&e.overlay.button?e.overlay.button.label:null,overlay_button_background:e.overlay&&e.overlay.button&&e.overlay.button.background||"#f35b5b",overlay_button_color:e.overlay&&e.overlay.button&&e.overlay.button.color||"#fff",overlay_button_width:e.overlay&&e.overlay.button&&e.overlay.button.width||"560px",overlay_button_target:e.overlay&&e.overlay.button&&e.overlay.button.target,overlay_button_link:e.overlay&&e.overlay.button&&e.overlay.button.link,overlay_button_mobile_link:e.overlay&&e.overlay.button&&e.overlay.button.mobile_link,overlay_bubble:e.overlay?!!e.overlay.bubble:null,overlay_bubble_zindex:e.overlay&&e.overlay.bubble?e.overlay.bubble.zindex||98:null,overlay_bubble_placement:e.overlay&&e.overlay.bubble&&e.overlay.bubble.placement||{bottom:"20px",right:"20px"},overlay_bubble_color:e.overlay&&e.overlay.bubble&&e.overlay.bubble.color||"#fff",overlay_bubble_background:e.overlay&&e.overlay.bubble&&e.overlay.bubble.background||"#f35b5b"};if(!u.website_id)throw"Graphcomment id missing";var g="https://graphcomment.com",p=g+"/front";if(e.localhost&&"undefined"!=typeof window&&window.location&&(/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/.test(window.location.hostname)||"localhost"===window.location.hostname)&&(p=g="http://"+window.location.hostname+":9003"),t.GC_API_URL&&(p=t.GC_API_URL),"undefined"==typeof window||!o)return(z=new D(t,o,a)).createIframeUrl(p,u);var h=u.target||o.getElementById("graphcomment");if(h){var y=(N=o.querySelector("html"),O=o.querySelector("meta[name=language]")||o.querySelector("meta[http-equiv=content-language]"),-1!==(j=N.getAttribute("lang")||N.getAttribute("xml:lang")||O&&O.getAttribute("content")||"en").indexOf("-")&&/^[\w]{2}/.test(j)?j.slice(0,2):/^[\w]{2}/.test(j)?j:"en");if(u.overlay){var f=function(e){var t="\n          body.gc-noscroll {\n            overflow: hidden !important;\n            position: fixed !important;\n          }\n          .gc-close {\n            display: none; justify-content: center; align-items: center;\n            cursor: pointer; position: absolute; z-index: -1;\n            margin-top: 10px; background: ".concat("light"===u.theme?"#fefefe":"#222",";\n            border: 1px solid ").concat("light"===u.theme?"rgba(188, 188, 188, 0.3)":"rgba(0, 0, 0, .3)",";\n            top: 0; left: -35px; border-radius: 5px 0 0 5px; border-right: 0;\n          }\n          .gc-close-chevron {\n            z-index: ").concat(u.overlay_zindex+1,";\n            padding: 8px 12px 8px 10px;\n          }\n          @keyframes gcFadeOverlay {\n            0% { opacity: .5; transform: translate(100%, 0); }\n          }\n          @keyframes gcFadeOverlayBg {\n            0% { opacity: 0; }\n          }\n          .graphcomment-overlay {\n            background: ").concat("light"===u.theme?"#fff":"#222","; box-sizing: border-box;\n            max-width: ").concat(u.overlay_width,"px; height: 100%; width: 100%; display: none;\n            position: fixed; z-index: ").concat(u.overlay_zindex,";\n            ").concat(s()?"overflow: scroll; -webkit-overflow-scrolling: touch;":"","\n            border-left: 1px solid ").concat("light"===u.theme?"#ddd":"#222",";\n            right: 0;\n            animation: gcFadeOverlay ease-in-out 300ms backwards;\n            transition: opacity 50ms ease-in-out 50ms, transform 100ms ease-in-out;\n          }\n          .graphcomment-overlay.fade-out {\n            opacity: 0;\n            transform: translate3d(100%, 0, 0);\n          }\n          .graphcomment-overlay.fade-in iframe,\n          .graphcomment-overlay.fade-out iframe {\n            display: none !important;\n          }\n          .graphcomment-overlay-background {\n            position: fixed; z-index: ").concat(u.overlay_zindex-1,";\n            top: 0; left: 0;\n            width: 100%; height: 100%;\n            display: none; background: ").concat(!0===u.overlay_background?"rgba(0, 0, 0, .5)":u.overlay_background,";\n            animation: gcFadeOverlayBg ease-in 200ms backwards;\n          }\n          /** large desktop **/\n          @media (min-width: ").concat(2*u.overlay_width+u.overlay_page_width,"px) {\n            .graphcomment-overlay {\n              max-width: ").concat(Math.min((window.innerWidth-u.overlay_page_width)/2,980),"px;\n            }\n          }\n          /** desktop **/\n          @media (min-width: ").concat(b+1,"px) {\n            .graphcomment-overlay .gc-close-cross {\n              display: flex;\n              padding: 12px 14px 12px 12px;\n            }\n            .graphcomment-overlay .gc-close-chevron {\n              display: none !important;\n            }\n            .gc-close:hover {\n              background: #fff;\n            }\n          }\n          /** mobile **/\n          @media (max-width: ").concat(b,"px) {\n            .gc-close {\n              position: fixed;\n              left: 0; right: initial;\n              background: #444; border: none;\n              margin-top: 0; border-radius: 0 0 5px 0;\n            }\n            .gc-close-cross {\n              display: none;\n            }\n          }\n          .graphcomment-overlay iframe {\n            background: ").concat("light"===u.theme?"#fff":"#222",";\n            box-shadow: ").concat("light"===u.theme?"0 0 10px rgba(188, 188, 188, 0.8)":"0 0 10px rgba(0, 0, 0, 0.8)",";\n            ").concat(s()?"":"max-height: 100%;"," min-height: 100%;\n          }\n        ");e.innerHTML=t},b=u.overlay_width+40,v=document.createElement("style");v.type="text/css",document.body.appendChild(v),f(v);var w=window.onresize;window.onresize=function(){f(v),"function"==typeof w&&w()},h.top||(h.style.top=0);h.insertAdjacentHTML("afterbegin",'<div class="gc-close gc-close-cross" onClick="hideGraphComment()"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAP1JREFUeNqU1DEOgzAMAECDMjD1JexIfQAP6lT4QEFInXkJSF06d4aXdGKsjRJkqsRxLLklDT4ZxTRblgVsVJhPzBvmB3Rx1JRludfkbOOFebXflRI7atZ13Wsy7NBtXNjNX8xa6DRYQx1Ofxtg16FOfZirmQgcAl340BDmYjD40dnFQ0Bru5awBg+mM3ahQSGG0YVhP8ZQiGF8bDjagD5OmA9MQRv2VCJI8cbcBGyz94AGdKNRCGARmtNcObTBOXWvnA9MwYJorsQa4aBOqFFi/DQfArr/OcwJWBfpdCZwTJmzCDoS2GL2SkxCe3xrWncod4bGMB9KGBnwE2AAREpUyw1JGzUAAAAASUVORK5CYII=" style="width: 10px; height: 10px; cursor: pointer;"></div>');if(h.insertAdjacentHTML("afterend",'<div class="gc-close gc-close-chevron" onClick="hideGraphComment()"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIiB2aWV3Qm94PSIwIDAgNTc0LjM3MzI5IDExNTcuMDI0MDM3NSIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg3MS4yNDUsLTE5ODIuMDg3OSkiPjxwYXRoIHN0eWxlPSIiIGQ9Im0gLTE2MzkuOTk3MSwyNjc2LjQ1NjggLTIzMS4yNDc5LC0yMzEuMjUwNCAyMzEuNTU5MiwtMjMxLjU1OTIgMjMxLjU1OTIsLTIzMS41NTkzIDU1LjYyNzUsNTUuNjE2OSBjIDMwLjU5NTEsMzAuNTg5MyA1NS42Mjc0LDU2LjE4MSA1NS42Mjc0LDU2Ljg3MDUgMCwwLjY4OTUgLTc4LjYwODYsNzkuODYzNyAtMTc0LjY4NTgsMTc1Ljk0MjggbCAtMTc0LjY4NTksMTc0LjY4OTEgMTc0LjY4NTksMTc0LjY4OTIgYyA5Ni4wNzcyLDk2LjA3OTEgMTc0LjY4NTgsMTc1LjI1MzMgMTc0LjY4NTgsMTc1Ljk0MjggMCwxLjIyOCAtMTEwLjAzNTEsMTExLjg2OCAtMTExLjI1NjUsMTExLjg2OCAtMC4zNDE2LDAgLTEwNC42ODI2LC0xMDQuMDYyNiAtMjMxLjg2ODksLTIzMS4yNTA0IHoiIGZpbGw9IiNkM2QzZDMiLz48L2c+PC9zdmc+" style="width: 20px; height: 20px; cursor: pointer;"></div>'),u.overlay_button){var _="background: "+u.overlay_button_background+"; border: none; padding: 0;border-radius: 3px; color: "+u.overlay_button_color+"; text-transform: uppercase;display: flex; cursor: pointer; margin: 10px auto;max-width: "+u.overlay_button_width+"; width: 100%; text-decoration: none;",x={fr:"Lire et rÃ©agir",zh:"é˜…è¯»å¹¶åšå‡ºååº”",cz:"PÅ™eÄtÄ›te si a reagujte",en:"Read and react",de:"Lesen und Reagieren",he:"×œ×§×¨×•× ×•×œ×”×’×™×‘",it:"Lettura e reazione",fa:"Ø®ÙˆØ§Ù†Ø¯Ù† Ùˆ ÙˆØ§Ú©Ù†Ø´ Ù†Ø´Ø§Ù† Ø¯Ù‡ÛŒØ¯",pt:"Leitura e reaÃ§Ã£o",es:"Lectura y reacciÃ³n"},k=x[y]||x.en,L=u.overlay_button_link||u.overlay_button_mobile_link,M=L?s()?u.overlay_button_mobile_link:u.overlay_button_link:null,T='<div class="graphcomment-button"><a style="'+_+'" '+(L?'href="'+M+'"':'onClick="showGraphCommentOverlay()"')+'><span style="padding: 8px 12px 8px; background: rgba(0, 0, 0, .1); display: flex; align-items: center; border-radius: 3px 0 0 3px"><svg style="width: 18px; margin-right: 6px; " fill="'+u.overlay_button_color+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" width="25" height="25">    <path d="M16.98 8.867a9.5 9.5 0 0 1 1.426.11.261.261 0 0 0 .297-.228c.029-.224.045-.45.047-.675 0-4.164-4.088-7.553-9.115-7.553C4.61.52.521 3.91.521 8.074a6.83 6.83 0 0 0 2.34 5.051L1.09 16.227a.52.52 0 0 0 .645.743l4.62-1.85c.484.155.979.273 1.48.355a.26.26 0 0 0 .296-.195c.885-3.613 4.577-6.413 8.848-6.413z"/> <path d="M16.98 10.43c-4.063 0-7.5 2.975-7.5 6.498a6.5 6.5 0 0 0 3.08 5.397 7.455 7.455 0 0 0 6.92.644l3.734 1.476a.58.58 0 0 0 .704-.774l-.869-3.074a5.39 5.39 0 0 0 1.43-3.669c0-3.523-3.437-6.499-7.5-6.499z"/></svg><span class="count"></span></span><span style="width: 100%; padding: 8px 12px 8px; font-weight: bold; text-align: center; align-self: center;">'+(u.overlay_button_label||k)+"</span></a></div>";document.querySelector(".graphcomment-button")||(u.overlay_button_target?u.overlay_button_target instanceof NodeList?[].forEach.call(u.overlay_button_target,function(e){e.insertAdjacentHTML("afterbegin",T)}):u.overlay_button_target.insertAdjacentHTML("afterbegin",T):h.insertAdjacentHTML("beforebegin",T)),graphcomment_comment_count(u,function(e){var t=document.querySelectorAll(".graphcomment-button .count");[].forEach.call(t,function(t){t.textContent=e})})}if(u.overlay_bubble&&!s()){var A=u.overlay_bubble_placement,S="background: "+u.overlay_bubble_background+"; border: none; padding: 0; color: "+u.overlay_bubble_color+"; text-transform: uppercase;display: flex; align-items: center; justify-content: center; cursor: pointer; position: fixed;"+Object.keys(A).map(function(e){return e+": "+A[e]+";"}).join(" ")+"width: 45px; height: 45px; border-radius: 50%; cursor: pointer; z-index: "+u.overlay_bubble_zindex+";";document.querySelector("#graphcomment-bubble")||document.body.insertAdjacentHTML("beforeend",'<div id="graphcomment-bubble" style="'+S+'" onClick="showGraphCommentOverlay()"><svg style="width: 30px; height: 30px" fill="'+u.overlay_bubble_color+'" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 100 100" x="0px" y="0px"><title>25</title><path d="M45.878,74.90678A47.693,47.693,0,0,0,59.8786,76.95692a49.4952,49.4952,0,0,0,8.08019-.66006c7.04034,9.64043,18.82088,9.62041,22.211,9.39042a.508.508,0,0,0,.37-.81009c-1.6501-2.21006-6.1802-9.26042-3.60014-16.90064C91.97985,63.68632,95,58.17608,95,52.17581c0-9.08035-6.91021-17.01074-17.22072-21.33088a27.61251,27.61251,0,0,1,2.47008,11.40052C80.24936,58.83614,65.28875,72.60676,45.878,74.90678Z"/><path d="M40.12225,14.25431C20.72474,14.25431,5,26.7883,5,42.24979,5,49.03414,8.02876,55.254,13.06572,60.09944c2.57451,8.63184-1.94772,16.58873-3.59928,19.09348a.58275.58275,0,0,0,.37044.9108c3.38943.25764,15.16954.28407,22.21215-10.61026a43.77036,43.77036,0,0,0,8.07322.7518c19.39745,0,35.12225-12.534,35.12225-27.99547S59.5197,14.25431,40.12225,14.25431Z"/></svg></div>')}var C=document.querySelector(".gc-close-chevron");if(u.overlay_background){h.insertAdjacentHTML("beforebegin",'<div class="graphcomment-overlay-background"></div>');var I=document.querySelector(".graphcomment-overlay-background")}window.showGraphCommentOverlay=function(e){if(h.classList.add("graphcomment-overlay","fade-in"),I&&(I.style.display="block"),z){var t=z.getIframe();t.src=t.src.replace("overlay=false","overlay=true"),t.src=t.src.replace("hidden=true","hidden=false")}setTimeout(function(){h.classList.remove("fade-in"),h.style.display="block",setTimeout(function(){window.innerWidth<=b&&(C.style.display="block",document.body.classList.add("gc-noscroll"))},1e3)},500)},window.showGraphComment=function(){if(h.classList.add("fade-out"),z){var e=z.getIframe();e.src=e.src.replace("overlay=true","overlay=false"),e.src=e.src.replace("hidden=true","hidden=false")}setTimeout(function(){h.classList.remove("graphcomment-overlay","fade-out")},500)},window.hideGraphComment=function(){C.style.display="none",I&&(I.style.display="none"),document.body.classList.remove("gc-noscroll"),u.overlay_alternate?window.showGraphComment():(h.style.display="none",u.hidden=!0)},u.overlay_visible?s()?window.showGraphComment():window.showGraphCommentOverlay():u.overlay_alternate?r.comment_id&&window.showGraphCommentOverlay():r.comment_id?M?window.location.href=J(M,{comment_id:r.comment_id}):window.showGraphCommentOverlay():window.hideGraphComment()}var N,O,j,z=new D(t,o,a),E=(h.appendChild(z.getIframe()),JSON.parse(JSON.stringify(u)));a?z.customAmpIframe(p,E):z.customIframe(p,E),z.postCreation();for(var R=["gcSetLang","gcToggleCommentScores","gcLightTheme","gcDarkTheme","gcDebugAds"],B=0;B<R.length;B++){!function(e){window[e]=function(){var t=Array.prototype.slice.call(arguments),o=z.getIframe();(o.contentWindow||o.contentDocument).postMessage(JSON.stringify({info:"cmd",cmd:e,args:t}),"*")}}(R[B])}}function G(){var e=null,t=null;this.init=function(o){return t=e=o,this},this.sanitize=function(){return t?(this.removeEndingSlash().removeProtocol(),t):""},this.reset=function(){t=e},this.removeEndingSlash=function(){return t=t.replace(/\/+$/,""),this},this.removeProtocol=function(){return t=t.replace(/^.*?:\/\//,""),this}}function D(o,n,a){var c={};if("undefined"!=typeof window&&n){var l,m,g=function(){var e=u.fixed_header_height;void 0!==e&&(h&&h.classList.contains("graphcomment-overlay")&&(h.style.top=h.top=e+"px",h.style.height="calc(100% - "+e+"px)",C&&(C.style.top=e+"px"),I&&(I.style.top=e+"px")),l&&e!==m&&l.postMessage(JSON.stringify({info:"fixed-header-height",height:e}),"*"),m=e)};(c=!0===a?n.createElement("amp-iframe"):n.createElement("iframe")).id="gc-iframe",t.addEventListener("message",function(o){try{if((o=o.data).pid&&o.pid!==i)return;if("gc-height"===o.name)c.height=o.data.height;else if("gc-token"===o.name)try{o.data.gcToken?window.localStorage.setItem("gc_token",o.data.gcToken):window.localStorage.removeItem("gc_token")}catch(e){}else if("gc-scroll"===o.name){var n=s()?40:0;!function(e,o,n){var a,r=t.pageYOffset||0,i=e.getBoundingClientRect().top+(t.pageYOffset||0)+o,c=Date.now(),l=h&&h.classList.contains("graphcomment-overlay")?h:t;if(0===(n=isNaN(n)?800:n||0))return void t.scrollTo(0,i);d(function e(){a=Date.now()-c;a=a>n?n:a;l.scrollTo(0,function(e,t,o,n){return-o*((e=e/n-1)*e*e*e-1)+t}(a,r,i-r,n));a<n&&d(e)})}(c,o.data.scrollTo-n,o.data.duration)}else"gc-getFrameElementTop"===o.name&&o.source.postMessage(JSON.stringify({info:"frameElementTop",top:frameElementTop}),o.origin);if("gc-new-comment"===o.name&&window.gcOnComment&&"function"==typeof window.gcOnComment&&window.gcOnComment(o.data),"gc-sso-auth"===o.name&&(window.gcSsoAuth&&"function"==typeof window.gcSsoAuth||console.error("[graphcomment] you need to define gcSsoAuth() to provide a way to authenticate your user."),window.gcSsoAuth()),"gc-sso-conflict"===o.name)window.gcSsoConflict&&"function"==typeof window.gcSsoConflict||console.error("[graphcomment] you need to define gcSsoConflict() to provide a way for your users to change conflicting username."),window.gcSsoConflict();else if("gc-loaded"===o.name){var a,r=z.getIframe();if(r.parentNode&&"none"===r.parentNode.style.display)return;var m,u=setInterval(function(){var e,t,o,n,i,c=(e=r.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,n=e.top<=t&&e.top+e.height>=0,i=e.left<=o&&e.left+e.width>=0,n&&i);c&&a&&(clearInterval(u),l.postMessage(JSON.stringify({info:"in_viewport"}),"*")),a=c},1e3);t&&(setInterval(g,1e3),g());try{m=window.localStorage.getItem("gc_token")}catch(e){}m&&s()&&l.postMessage(JSON.stringify({info:"gc_token",token:encodeURIComponent(m)}),"*"),void 0!==e.sso_data&&(e.sso_data?t.gcSsoLogin(e.sso_data):t.gcSsoLogout())}}catch(e){console.debug("[gc] failed to decode message: "+o.data,e)}},!1),t.gcSsoLogout=function(){l.postMessage(JSON.stringify({info:"sso-logout"}),"*")},t.gcSsoLogin=function(e){l.postMessage(JSON.stringify({info:"sso-login",data:e}),"*")}}this.postCreation=function(){var e=n.getElementById("gc-iframe");function o(){a||l.postMessage(JSON.stringify({info:"parent_loaded"}),"*")}l=e.contentWindow||e.contentDocument,window.iframeFound=e,"complete"===n.readyState?o():n.addEventListener("DOMContentLoaded",o()),!a&&t.addEventListener("scroll",U(function(){var e=h.getBoundingClientRect().top-document.body.getBoundingClientRect().top,t=h.getBoundingClientRect().left-document.body.getBoundingClientRect().left;l.postMessage(JSON.stringify({info:"scroll-start",win:{width:window.innerWidth,height:window.innerHeight},pos:{top:(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)-e,left:(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)-t}}),"*")},500,!0),!1),!a&&t.addEventListener("scroll",U(function(){var e=h.getBoundingClientRect().top-document.body.getBoundingClientRect().top,t=h.getBoundingClientRect().left-document.body.getBoundingClientRect().left;l.postMessage(JSON.stringify({info:"scroll-end",win:{width:window.innerWidth,height:window.innerHeight},pos:{top:(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)-e,left:(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)-t}}),"*")},500),!1)},this.getIframe=function(){return c},this.customIframe=function(e,t){c.src=this.createIframeUrl(e,t),c.frameBorder="0",c.style.cssText="width:100% !important; border:none !important; max-width: 980px; margin: 0 auto; display: block;",c.scrolling="no",c.horizontalscrolling="no",c.verticalscrolling="no",c.allowtransparency="true",u.widget?(c.height="auto",c.style.marginBottom="20px"):c.height=u.overlay?"100%":"400px"},this.customAmpIframe=function(e,t){c.setAttribute("src",this.createIframeUrl(e,t)),c.setAttribute("width","600"),c.setAttribute("height","400"),c.setAttribute("layout","responsive"),c.setAttribute("title",t.title),c.setAttribute("sandbox","allow-scripts allow-same-origin allow-modals allow-popups allow-popups-to-escape-sandbox allow-top-navigation allow-forms"),c.setAttribute("resizable",""),c.setAttribute("frameBorder","0"),c.insertAdjacentHTML("beforeend",'<div overflow tabindex=0 role=button aria-label="">Read more...</div>')},this.createIframeUrl=function(e,o){var n=e+"/";for(var a in r&&(o.comment_id=r.comment_id||u.comment_id,o.token=r.token),u.count_per_page&&(o.count_per_page=u.count_per_page),delete o.target,o)0===a.indexOf("overlay_")&&delete o[a];return t&&(o.overlay=h.classList.contains("graphcomment-overlay"),o.mobile=s()),o.lang=y,o.cache=Math.round(1e9*Math.random()),o.pid=i,n=J(n,o)}}function J(e,t){var o="?";return Object.keys(t||{}).forEach(function(n){t.hasOwnProperty(n)&&(t[n]||!1===t[n])&&(e=e+o+n+"="+encodeURIComponent(t[n]),"?"===o&&(o="&"))}),e}function U(e,t,o){var n;return function(){var a=this,r=arguments,i=o&&!n;clearTimeout(n),n=setTimeout(function(){n=null,o||e.apply(a,r)},t),i&&e.apply(a,r)}}}function graphcomment_widget(e){e.widget=!0,graphcomment(e)}function graphcomment_comment_count(e,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==this.readyState)if(200===this.status){try{var o=JSON.parse(this.responseText)}catch(t){return void console.error('[graphcomment counter] fail to decode response "'+this.responseText+'", using url "'+e.url+'"')}if(void 0!==o.count)if(t(o.count),o.website.websocket&&o.website.websocket.notification){var n=o.count;!function(e,t){var o=new WebSocket("wss://graphcomment.com/websocket");o.onerror=function(e){return console.error("WS error",e)},o.onmessage=function(e){try{var o=JSON.parse(e.data)}catch(t){return void console.error("unable to parse WS event",e.data)}t(o)}.bind(this),o.onopen=function(){this.send(JSON.stringify({joinThread:e}))}}(o.thread,function(){t(++n)})}else setTimeout(function(){graphcomment_comment_count(e,t)},3e4)}else 400===this.status&&console.error('[graphcomment counter] invalid url "'+e.url+'", this url is not rattached to a GraphComment page.')};var n="website="+encodeURIComponent(e.website_id)+"&url="+encodeURIComponent(e.url)+(e.uid?"&uid="+encodeURIComponent(e.uid):"")+(e.guid?"&guid="+encodeURIComponent(e.guid):"");o.open("GET","https://graphcomment.com/api/pub/numberOfComments?"+n,!0),o.send()}function graphcomment_counter(){var e=document.querySelectorAll(".gc-counter");Array.prototype.forEach.call(e,function(e){graphcomment_comment_count({url:e.dataset.url||"/",uid:e.dataset.uid,guid:e.dataset.guid,website_id:gc_params.graphcomment_id},function(t){e.textContent=t})})}if(window.graphcommentNotifs=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200===this.status){try{var t=JSON.parse(this.responseText)}catch(e){return void console.error('[graphcomment notifs] fail to decode response "'+this.responseText)}e.callback&&e.callback(t)}};var o="https://graphcomment.com/api/pub/notifications/pubkey/"+(gc_params.sso_public_key||gc_params.api_public_key)+"/key/"+gc_params.sso_data;o+="?page_nbr="+e.page||0,o+="&page_size="+e.limit||10,o+="&action="+(e.actions||["pinned","voted","replied","ecd","reward","complete","reco"]).join(","),t.open("GET",o,!0),t.send()},window.graphcommentNotifsWs=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200===this.status){try{var t=JSON.parse(this.responseText)}catch(e){return void console.error('[graphcomment notifs ws] fail to decode response "'+this.responseText)}o=t.website,n=t.userId,(a=new WebSocket("wss://graphcomment.com/websocket")).onopen=function(){a.send(JSON.stringify({joinUser:o+n}))},a.onmessage=function(t){try{var o=JSON.parse(t.data)}catch(e){return void console.error("unable to parse WS event",t.data)}e(o.msg)}}var o,n,a};var o=gc_params.sso_public_key||gc_params.api_public_key,n=gc_params.sso_data;t.open("GET","https://graphcomment.com/api/pub/user-datas/pubkey/"+o+"/key/"+n,!0),t.send()},"undefined"!=typeof module)module.exports=function(e){if(!e.url)throw'you must provide "url" parameter (full url of your page with GraphComment)';if(!e.page_title)throw'you must provide "page_title" parameter (title of your page with GraphComment)';return graphcomment(e)};else{if(window.gc_params||window.graphcomment_id){var gc_params=window.gc_params||{};window.graphcomment_id&&(gc_params.graphcomment_id=window.graphcomment_id),graphcomment(gc_params),graphcomment_counter()}window.gc_ready&&"function"==typeof window.gc_ready&&window.gc_ready(),window.gcReady&&"function"==typeof window.gcReady&&window.gcReady()}